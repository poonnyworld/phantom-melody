services:
  phantom-radio:
    build: .
    container_name: phantom-radio-bot
    restart: unless-stopped
    environment:
      - NODE_ENV=production
      # Override MONGO_URI to use MongoDB from Honor Bot container
      - MONGO_URI=mongodb://mongodb:27017/honorbot
    env_file:
      - .env
    volumes:
      # Mount music folder (ใส่ไฟล์ .wav/.mp3/.ogg ใน music/{albumSlug}/ บนโฮสต์)
      - ./music:/app/music:ro
      # Export usage history มาที่โฟลเดอร์นี้ (รัน script ด้วย --out-dir /app/exports)
      - ./exports:/app/exports
    # Connect to Honor Bot's network to share MongoDB
    networks:
      - honorbot-network
    # No port exposed - Discord bot doesn't need web server

networks:
  # Use external network from Honor Bot (check actual network name with: docker network ls)
  honorbot-network:
    external: true
    name: honorbot-pbz_default
